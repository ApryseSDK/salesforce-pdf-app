<template>
    <template if:false={loadFinished}>
        <div class="spinnerContainer">
            <lightning-spinner alternative-text="Loading" size="small"></lightning-spinner>
        </div>
    </template>
    <lightning-card title="Salesforce PDF App" class="slds-var-p-around_small">
        <div class="slds-var-p-around_xx-small">
            <lightning-card>
                <p class="slds-p-around_x-small">
                    Search text by typing into the search box. Press enter or stop typing to fire the search event.
                </p>
                <p class="slds-p-around_x-small">
                    Replace text on +30 document types including: PDF, MS Office (doc, docx, xlsx, pptx) and Images
                    (jpg, png). Uploaded files don't transfer across a network - replacement occurs directly in
                    Salesforce. Learn more at: <a href="https://www.pdftron.com" target="_blank">pdftron.com</a>
                    <br /><br />
                    Search for text with brackets like:<br />
                    <b>[Company Name]</b>
                </p>
                <p>
                    Redact content by searching or using the redaction tool to highlight text, then clicking on the redact button.
                </p>
            </lightning-card>
        </div> 
        <div>
            <lightning-input type="file" onchange={onFileUpload} name="uploadFile" label="Upload File">  
            </lightning-input>  
        </div>
        <div class="slds-var-p-around_xx-small slds-grid">
            <div id="attachmentCombobox" class="slds-col slds-p-around_x-small">
                <lightning-combobox name="progress" value={value} label="Document" placeholder="Choose an attachment..."
                    options={picklistOptions} onchange={handleChange}></lightning-combobox>
            </div>
        </div>
        <div class="slds-var-p-around_xx-small slds-grid">
            <div class="slds-col slds-size_3-of-4 slds-p-around_x-small" onkeyup={handleKeyUp}>
                <lightning-input type="search" label="Search Text" value={searchTerm} onchange={handleSearch} required></lightning-input>
            </div>
            <div class="slds-col slds-size_1-of-4 slds-p-top_x-large">
                <lightning-button variant="brand" label="Redact" title="Redact Text"  onclick={handleContentRedact}></lightning-button>
            </div>
        </div>
        <div class="slds-var-p-around_xx-small slds-grid">
            <div class="slds-col slds-size_3-of-4 slds-p-around_x-small">
                <lightning-input type="text" label="Replace Text" value={replaceTerm} onchange={handleReplace}></lightning-input>
            </div>
            <div class="slds-col slds-size_1-of-4 slds-p-top_x-large">
                <lightning-button variant="brand" label="Replace" title="Replace Text"  onclick={handleContentReplace}></lightning-button>
            </div>
        </div>
    </lightning-card>
</template>